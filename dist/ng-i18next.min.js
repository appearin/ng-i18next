/*! ng-i18next - v0.2.9 - 2014-01-27 - Copyright (c) 2014 Andre Meyering; Licensed MIT */angular.module("jm.i18next",["ng"]),angular.module("jm.i18next").provider("$i18next",function(){"use strict";var a,b=this,c=null,d={};b.options={},b.$get=["$rootScope",function(e){function f(a){window.i18n.init(a,function(a){d={},e.$$phase||e.$digest(),c=a,e.$broadcast("i18nextLanguageChange")})}function g(a,b,e){var f=b.lng||"auto";d[f]||(d[f]={}),c?(!d[f][a]||e)&&(d[f][a]=c(a,b)):d[f][a]=a}function h(b,c){var e=c?angular.extend({},a,c):a;return g(b,e,!!c),c&&c.lng?d[c.lng][b]:a.lng?d[a.lng][b]:d.auto[b]}return h.debugMsg=[],a=h.options=b.options,e.$watch(function(){return h.options},function(b,c){h.debugMsg.push("i18next options changed: \n","old options",c,"new options",b),a=h.options,c!==b&&f(a)},!0),f(a),h}]}),angular.module("jm.i18next").directive("ngI18next",["$rootScope","$i18next","$compile","$parse",function(a,b,c){"use strict";function d(d,e,f,g,h){var i;i=h?b(f,h):b(f),g?"html"===g?e.html(i):e.attr(g,i):e.text(i),c(e.contents())(d),a.$$phase||a.$digest()}function e(a){var b,c,d=a.match(/\[(.*)\](?:\((.*)\))?/);if(d){if(b=d[1].split(":"),-1!==b.indexOf("i18next")){var e=d[2].replace(/'/g,'"'),e=e.replace(/([a-zA-Z][^:^"]*)(?=\s*:)/g,'"$1"');try{c=JSON.parse(e)}catch(f){}b.splice(b.indexOf("i18next"),1)}a=a.replace(d[0],"")}var g={attributes:b&&!!b.length&&b,options:c,key:a};return window.console.log(g),g}function f(a,b,c,e,f){if(!e)return void d(a,b,c,e,f);for(var g=0;g<e.length;g++)d(a,b,c,e[g],f)}return{restrict:"A",scope:!1,link:function(a,b,c){function d(c){h=e(c),g=h.key?h.key:h.attributes&&h.attributes.indexOf(!0)?b.html().replace(/\n/g,"").replace(/^\s+|\s+$/g,"").replace(/[ \t]{2,}/g," "):b.text().replace(/\n/g,"").replace(/^\s+|\s+$/g,"").replace(/[ \t]{2,}/g," "),g&&f(a,b,g,h.attributes,h.options)}var g,h;c.$observe("ngI18next",d),d(c.ngI18next),a.$on("i18nextLanguageChange",function(){f(a,b,g,h.attributes,h.options)})}}}]),angular.module("jm.i18next").filter("i18next",["$i18next",function(a){"use strict";return function(b,c){return a(b,c)}}]);